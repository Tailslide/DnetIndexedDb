@page "/"
@using DnetIndexedDb.Blob
@using System.Diagnostics
@*@inject IHttpClientFactory ClientFactory*@

@inject IJSRuntime JSRuntime
@inject BlobDb  BlobDb

<div class="dnet-desktop-content destok-layout" style="padding-top: 10px;">
    <div class="row" style="height: calc(100% - 0px)">
        <div class="col-12" style="height: calc(100% - 0px);">
            <div style="height: calc(100% - 0px); width: 100%; background-color: #FFFFFF">
                <span>Thanks for your interest in DnetIndexedDb!. Go to Index.razor and debug</span>
                <button @onclick="TestBlob">Click to load blob</button>
                <div>@Message</div>
            </div>
        </div>
    </div>
</div>

@code {
    public string Message { get; set; }

    private async Task TestBlob()
    {
       var db1Result = await BlobDb.OpenIndexedDb();  
        if (db1Result != -1)
        {
            byte[] Blob = new byte[	5242880];
            //optionally randomize all the bytes
            //Random rnd = new Random();
            //rnd.NextBytes(Blob);
            var db1Resultdel = BlobDb.DeleteAll("BlobStore");
            Stopwatch sw = new Stopwatch();
            sw.Start();
            var db1Result1 = BlobDb.AddBlobItem<byte[]>("BlobStore", Blob,"firstrecord");
            Message = $"Added 5Mb blob to store in {sw.ElapsedMilliseconds} ms";
        }
    }

}




